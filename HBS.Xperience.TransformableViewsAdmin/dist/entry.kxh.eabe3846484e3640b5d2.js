System.register(["@kentico/xperience-admin-base","@kentico/xperience-admin-components","react"],(function(e,t){var a={},n={},l={};return{setters:[function(e){a.useFormComponentCommandProvider=e.useFormComponentCommandProvider,a.usePageCommand=e.usePageCommand},function(e){n.Button=e.Button,n.ButtonColor=e.ButtonColor,n.CodeEditor=e.CodeEditor,n.Cols=e.Cols,n.Column=e.Column,n.Dialog=e.Dialog,n.Divider=e.Divider,n.DividerOrientation=e.DividerOrientation,n.DropPlacement=e.DropPlacement,n.FormItemWrapper=e.FormItemWrapper,n.Grid=e.Grid,n.Headline=e.Headline,n.HeadlineSize=e.HeadlineSize,n.Icon=e.Icon,n.Input=e.Input,n.Paper=e.Paper,n.RadioButton=e.RadioButton,n.RadioGroup=e.RadioGroup,n.Row=e.Row,n.Spacing=e.Spacing,n.TextArea=e.TextArea,n.TextWithLabel=e.TextWithLabel,n.TreeNode=e.TreeNode,n.TreeNodeLeadingIcon=e.TreeNodeLeadingIcon,n.TreeNodeTitle=e.TreeNodeTitle,n.TreeNodeTrailingIcon=e.TreeNodeTrailingIcon,n.TreeView=e.TreeView,n.WindowPortal=e.WindowPortal,n.useWindowDimensions=e.useWindowDimensions},function(e){l.createContext=e.createContext,l.default=e.default,l.useContext=e.useContext,l.useEffect=e.useEffect,l.useMemo=e.useMemo,l.useReducer=e.useReducer,l.useRef=e.useRef,l.useState=e.useState}],execute:function(){e((()=>{var e={404:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(81),l=a.n(n),r=a(645),o=a.n(r)()(l());o.push([e.id,".trbv-select-list-item {\n    margin: 7px auto;\n    display: flex;\n    gap: 10px;\n    padding: 10px;\n    border: 1px solid darkgrey;\n    cursor: pointer;\n    transition: all 200ms;\n    align-items: center;\n    border-radius: 3000px;\n    width: 350px;\n    max-width: 100%;\n}\n\n    .trbv-select-list-item:hover, .trbv-select-list-item.selected {\n        background-color: lightgray;\n    }\n\n    .trbv-select-list-item .selected-icon {\n        flex: 1 1 0%;\n        opacity: 0;\n        transition: all 200ms;\n        display:flex;\n        justify-content: flex-end\n    }\n\n    .trbv-select-list-item:hover .selected-icon {\n        opacity: 1;\n    }\n    .trbv-select-list-item.selected .selected-icon {\n        color: green;\n        opacity: 1;\n    }\n.dialog-z-index {\n    z-index: 3001;\n}",""]);const i=o},309:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(81),l=a.n(n),r=a(645),o=a.n(r)()(l());o.push([e.id,".icon-clickable {\n    padding: 5px;\n    color: darkgray;\n    border-radius: 5px\n}\n    .icon-clickable.delete {\n        color: red;\n        margin-right: 5px;\n    }\n    .icon-clickable.add {\n        color: green;\n    }\n    .icon-clickable:hover {\n        opacity: 0.8;\n        background-color: darkgray;\n        color: white;\n    }\n    .icon-clickable.add:hover {\n        background-color: green;\n    }\n\n    .icon-clickable.delete:hover {\n        background-color: red;\n    }\n\n.treeview-wrapper {\n    padding: 20px;\n}\n\n.views-wrapper {\n    padding: 20px;\n}\n\n.grid-view-item {\n    padding: 10px;\n    border-radius: 10px;\n    border: 1px solid #eee;\n    color: #333;\n    cursor: pointer;\n    display: flex;\n    flex-direction: row\n}\n.grid-view-item:hover {\n    background-color: lightgray;\n}",""]);const i=o},577:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(81),l=a.n(n),r=a(645),o=a.n(r)()(l());o.push([e.id,"",""]);const i=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",n=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),n&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),n&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,n,l,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),a&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=a):d[2]=a),l&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=l):d[4]="".concat(l)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function a(e){for(var a=-1,n=0;n<t.length;n++)if(t[n].identifier===e){a=n;break}return a}function n(e,n){for(var r={},o=[],i=0;i<e.length;i++){var s=e[i],c=n.base?s[0]+n.base:s[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var m=a(u),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var f=l(p,n);n.byIndex=i,t.splice(i,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function l(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,l){var r=n(e=e||[],l=l||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var i=a(r[o]);t[i].references--}for(var s=n(e,l),c=0;c<r.length;c++){var d=a(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=s}}},569:e=>{"use strict";var t={};e.exports=function(e,a){var n=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{"use strict";e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var l=void 0!==a.layer;l&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,l&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var r=a.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},722:(e,t,a)=>{const n=a(905).R;t.s=function(e){if(e||(e=1),!a.y.meta||!a.y.meta.url)throw console.error("__system_context__",a.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");a.p=n(a.y.meta.url,e)}},905:(e,t,a)=>{t.R=function(e,t){var a=document.createElement("a");a.href=e;for(var n="/"===a.pathname[0]?a.pathname:"/"+a.pathname,l=0,r=n.length;l!==t&&r>=0;)"/"===n[--r]&&l++;if(l!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+l+") in the URL path "+e);var o=n.slice(0,r+1);return a.protocol+"//"+a.host+o};Number.isInteger},952:e=>{"use strict";e.exports=a},271:e=>{"use strict";e.exports=n},954:e=>{"use strict";e.exports=l}},r={};function o(t){var a=r[t];if(void 0!==a)return a.exports;var n=r[t]={id:t,exports:{}};return e[t](n,n.exports,o),n.exports}o.y=t,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",o.nc=void 0;var i={};return(0,o(722).s)(1),(()=>{"use strict";o.r(i),o.d(i,{TransformableViewObjectsFormComponent:()=>A,TransformableViewPageTemplate:()=>N,TransformableViewWidgetFormComponent:()=>L});var e=o(952),t=o(271),a=o(954),n=o(379),l=o.n(n),r=o(795),s=o.n(r),c=o(569),d=o.n(c),u=o(565),m=o.n(u),p=o(216),f=o.n(p),g=o(589),y=o.n(g),C=o(309),v={};v.styleTagTransform=y(),v.setAttributes=m(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=f(),l()(C.Z,v),C.Z&&C.Z.locals&&C.Z.locals;const b=(e,t)=>{const{type:a,data:n}=t,l={...e};switch(a){case"categorySet":l.categories=[...l.categories];const e=l.categories.findIndex((e=>e.transformableViewCategoryID==n.transformableViewCategoryID));e>-1?l.categories[e]=n:l.categories.push(n),l.selectedCategory=null;break;case"categorySelect":l.selectedCategory=n;break;case"categoryDelete":l.categories=l.categories.filter((e=>e.transformableViewCategoryID!=n));break;case"setDialog":l.dialogOptions=n.dialogOptions,l.selectedCategory=n.selectCategory;break;case"categoriesSet":l.categories=[...l.categories];for(const e of n){const t=l.categories.findIndex((t=>t.transformableViewCategoryID==e.transformableViewCategoryID));t>-1?l.categories[t]=e:l.categories.push(e)}}return l},E={isOpen:!1,headline:"",message:""},w=(0,a.createContext)({setCurrentCategory:e=>{},setCategory:e=>{},setCategories:e=>{},deleteCategory:e=>{},setDialog:e=>{},dialogOptions:E,categories:[]}),h=()=>{const{setCategory:e,deleteCategory:n,dialogOptions:l,setDialog:r,selectedCategory:o}=(0,a.useContext)(w),[i,s]=(0,a.useState)("");(0,a.useEffect)((()=>{s(o?.transformableViewCategoryDisplayName??"")}),[o]);const c=()=>{r({dialogOptions:{...l,isOpen:!1},selectCategory:null})};return a.default.createElement(t.Dialog,{isOpen:l.isOpen,headline:l.headline,onClose:c,isDismissable:!0,headerCloseButton:{tooltipText:"Close Dialog"},confirmAction:{label:"Okay",onClick:()=>{"setCategory"==l.type&&o?e({...o,transformableViewCategoryDisplayName:i}):"deleteCategory"==l.type&&o&&n(o.transformableViewCategoryID??-1),r({dialogOptions:{...l,isOpen:!1},selectCategory:null})}},cancelAction:{label:"Cancel",onClick:c}},"setCategory"==l.type&&a.default.createElement(t.Input,{label:"Display Name",value:i,onChange:e=>s(e.currentTarget.value)}),l.message)},x=({selected:e,category:n,hovered:l})=>{const{setDialog:r,dialogOptions:o}=(0,a.useContext)(w);return a.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},a.default.createElement(t.TreeNodeLeadingIcon,{isSelected:e,draggable:!0},a.default.createElement(t.Icon,{name:l?"xp-dots-vertical":"xp-parent-child-scheme"})),a.default.createElement(t.TreeNodeTitle,{isSelected:e},n.transformableViewCategoryDisplayName),l&&a.default.createElement(a.default.Fragment,null,a.default.createElement(t.TreeNodeTrailingIcon,null,a.default.createElement("span",{className:"icon-clickable",onClick:e=>{e.stopPropagation(),r({dialogOptions:{...o,isOpen:!0,type:"setCategory",headline:"Update Category",message:""},selectCategory:n})}},a.default.createElement(t.Icon,{name:"xp-edit"}))),a.default.createElement(t.TreeNodeTrailingIcon,null,a.default.createElement("span",{className:"icon-clickable add",onClick:e=>{var t;e.stopPropagation(),t={transformableViewCategoryDisplayName:"",transformableViewCategoryParentID:n.transformableViewCategoryID},r({dialogOptions:{...o,isOpen:!0,type:"setCategory",headline:"Add Category",message:"Add category to parent category: "+n.transformableViewCategoryDisplayName},selectCategory:t})}},a.default.createElement(t.Icon,{name:"xp-plus-circle"}))),a.default.createElement(t.TreeNodeTrailingIcon,null,a.default.createElement("span",{className:"icon-clickable delete",onClick:e=>{e.stopPropagation(),r({dialogOptions:{...o,isOpen:!0,type:"deleteCategory",headline:"Delete Category",message:"Delete category: "+n.transformableViewCategoryDisplayName},selectCategory:n})}},a.default.createElement(t.Icon,{name:"xp-minus-circle"})))))},T=({category:e,level:n})=>{const{dialogOptions:l,setDialog:r,setCategories:o,categories:i,setCategory:s,setCurrentCategory:c}=(0,a.useContext)(w),[d,u]=(0,a.useState)((e.children?.length??0)>0);return(0,a.useEffect)((()=>{!d&&(e.children?.length??0)>0&&u(!0)}),[e.children?.length]),a.default.createElement(t.TreeNode,{name:e.transformableViewCategoryName??"",hasChildren:(e.children?.length??0)>0,dropHandler:(e,a,n)=>{var l=i.find((t=>""+t.transformableViewCategoryID==e)),r=i.find((e=>""+e.transformableViewCategoryID==a));if(n==t.DropPlacement.Child)l&&r&&(l.transformableViewCategoryParentID=r.transformableViewCategoryID,s(l));else if(r){var c=r,d=i.filter((e=>e.transformableViewCategoryParentID==c.transformableViewCategoryParentID&&e.transformableViewCategoryID!=l?.transformableViewCategoryID)).sort(((e,t)=>(e.transformableViewCategoryOrder??0)-(t.transformableViewCategoryOrder??0))),u=d.findIndex((e=>e.transformableViewCategoryID==c.transformableViewCategoryID));if(n==t.DropPlacement.Below&&u++,l&&r){l.transformableViewCategoryParentID=r.transformableViewCategoryParentID;var m=[...d.slice(0,u),l,...d.slice(u)];o(m)}}},nodeIdentifier:e.transformableViewCategoryID?.toString()??"",isDraggable:!0,isToggleable:(e.children?.length??0)>0,onNodeToggle:e=>u(e),isExpanded:d,onNodeClick:()=>{c(e)},renderNode:(t,n,l)=>l&&l(a.default.createElement("div",null,a.default.createElement(x,{selected:t,category:e,hovered:n})),{}),level:n},e.children&&e.children.map((e=>a.default.createElement(T,{key:e.transformableViewCategoryID,category:e,level:n+1}))))},D=T,I=()=>{const{categories:e,setDialog:n,dialogOptions:l}=(0,a.useContext)(w),r=(0,a.useMemo)((()=>(e=>(e.forEach((t=>{t.children=e.filter((e=>e.transformableViewCategoryParentID===t.transformableViewCategoryID)).sort(((e,t)=>(e.transformableViewCategoryOrder??0)-(t.transformableViewCategoryOrder??0)))})),e.filter((e=>!e.transformableViewCategoryParentID)).sort(((e,t)=>(e.transformableViewCategoryOrder??0)-(t.transformableViewCategoryOrder??0)))))(e)),[e]);return a.default.createElement(t.TreeView,null,a.default.createElement(t.TreeNode,{name:"",hasChildren:!0,nodeIdentifier:"",isDraggable:!0,dropHandler:()=>{},isToggleable:!1,isExpanded:!0,renderNode:(e,r)=>a.default.createElement(a.default.Fragment,null,a.default.createElement(t.TreeNodeLeadingIcon,{isSelected:e,draggable:!1},a.default.createElement(t.Icon,{name:"xp-parent-child-scheme"})),a.default.createElement(t.TreeNodeTitle,{isSelected:e},"Root Category"),r&&a.default.createElement(t.TreeNodeTrailingIcon,null,a.default.createElement("span",{className:"icon-clickable add",style:{marginRight:5},onClick:e=>{e.stopPropagation(),n({dialogOptions:{...l,isOpen:!0,type:"setCategory",headline:"Add Category",message:""},selectCategory:{transformableViewCategoryDisplayName:""}})}},a.default.createElement(t.Icon,{name:"xp-plus-circle"})))),level:0},r.map((e=>a.default.createElement(D,{key:e.transformableViewCategoryID,category:e,level:1})))))},V=({selectedView:e,setViewsCommand:n,open:l,closeDialog:r})=>{const[o,i]=(0,a.useState)(e?.transformableViewDisplayName),[s,c]=(0,a.useState)(e?.transformableViewContent),d=()=>{r()};return a.default.createElement(t.Dialog,{isOpen:l,headline:"Edit View",onClose:d,isDismissable:!0,headerCloseButton:{tooltipText:"Close Dialog"},confirmAction:{label:"Okay",onClick:()=>{e&&n({...e,transformableViewDisplayName:o??"",transformableViewContent:s??""}),r()}},cancelAction:{label:"Cancel",onClick:d}},a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Input,{label:"Display Name",value:o,onChange:e=>i(e.currentTarget.value)})),a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Input,{label:"Code Name",value:e?.transformableViewName,disabled:!0})),a.default.createElement("div",null,a.default.createElement(t.TextWithLabel,{label:"View Editor",value:'<div><span style="color: #af00db;">@addTagHelper</span> <span style="color: #a31515;">*, Microsoft.AspNetCore.Mvc.TagHelpers</span></div><div><span style="color: #af00db;">@model</span> <span style="color: #267f99;">HBS</span><span style="color: #000000;">.</span><span style="color: #267f99;">Xperience</span><span style="color: #000000;">.</span><span style="color: #267f99;">TransformableViews</span><span style="color: #000000;">.</span><span style="color: #267f99;">Models</span><span style="color: #000000;">.</span><span style="color: #267f99;">TransformableViewModel</span></div>',valueAsHtml:!0}),a.default.createElement(t.CodeEditor,{style:{maxWidth:"100%",width:"1000px"},language:"html",value:s,onChange:e=>c(e),explanationText:'\n                TransformableViewModel contains the following properties:  <span style="color: #0000ff;">string</span> <span style="color: #001080;">ViewTitle</span>,  <span style="color: #0000ff;">string</span> <span style="color: #001080;">ViewClassNames</span>,  <span style="color: #0000ff;">string</span> <span style="color: #001080;">ViewCustomContent</span>,  <span style="color: #0000ff;"><span style="color: #0000ff;">IEnumerable&lt;</span></span><span style="color: #800000;">dynamic</span><span style="color: #0000ff;">&gt;</span> <span style="color: #001080;">Items</span>.<br/>  You can reference them like a normal view using <span style="color: #af00db;">@</span><span style="color: #001080;">Model</span><span style="color: #000000;">.</span><span style="color: #001080;">Items</span><br/>To reference other transformable views, append <b>TransformableView/</b> to the view\'s code name e.g. <b>TransformableView/TestPartialView</b>.\n            ',explanationTextAsHtml:!0})))},S=({categoryID:n})=>{const[l,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)(),[d,u]=(0,a.useState)(),[m,p]=(0,a.useState)(3),{width:f}=(0,t.useWindowDimensions)();(0,a.useEffect)((()=>{p(f>800?3:1)}),[f]);const{execute:g}=(0,e.usePageCommand)("GetViews",{after:e=>{e&&r(e)}});(0,a.useEffect)((()=>{g(n)}),[n]);const{execute:y}=(0,e.usePageCommand)("SetView",{after:e=>{e&&g(n)}}),{execute:C}=(0,e.usePageCommand)("DeleteView",{after:e=>{e&&g(n)}}),v=e=>{c(e),i(!0)};return a.default.createElement("div",null,a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Row,null,a.default.createElement(t.Column,null,a.default.createElement(t.Row,{spacing:t.Spacing.L},a.default.createElement(t.Column,{cols:t.Cols.Col2},a.default.createElement(t.Button,{fillContainer:!0,label:"Add View",color:t.ButtonColor.Primary,onClick:()=>v({transformableViewContent:"",transformableViewDisplayName:"",transformableViewTransformableViewCategoryID:n})})),a.default.createElement(t.Column,null,a.default.createElement(t.Input,{placeholder:"Search",value:d,type:"text",onChange:e=>u(e.currentTarget.value),clearButton:a.default.createElement("span",{onClick:()=>u(void 0)},a.default.createElement(t.Icon,{name:"xp-modal-close"}))})))))),a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Divider,{orientation:t.DividerOrientation.Horizontal})),a.default.createElement(t.Grid,{cols:3,columnGap:t.Spacing.L,rowGap:t.Spacing.L},l.map((e=>a.default.createElement("div",{className:"grid-view-item",onClick:()=>v(e)},a.default.createElement("span",{style:{paddingRight:8}},a.default.createElement(t.Icon,{name:"xp-layout"})),e.transformableViewDisplayName,a.default.createElement("span",{style:{float:"right",color:"red",flex:1}},a.default.createElement("span",{onClick:t=>{t.stopPropagation(),C(e.transformableViewID)},style:{float:"right"}},a.default.createElement(t.Icon,{name:"xp-bin"}))))))),o&&a.default.createElement(V,{open:o,selectedView:s,setViewsCommand:y,closeDialog:()=>i(!1)}))},N=({categories:n})=>{const[l,r]=(0,a.useReducer)(b,{categories:n,dialogOptions:E}),o=(0,a.useRef)(null);(0,a.useEffect)((()=>{o&&o.current&&(o.current.style.height="100%")}),[o.current]);const{execute:i}=(0,e.usePageCommand)("SetCategory",{after:e=>{e&&r({type:"categorySet",data:e})}}),{execute:s}=(0,e.usePageCommand)("SetCategories",{after:e=>{e&&r({type:"categoriesSet",data:e})}}),{execute:c}=(0,e.usePageCommand)("DeleteCategory",{after:e=>{e&&r({type:"categoryDelete",data:e})}});return a.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Headline,{size:t.HeadlineSize.M},"Transformable Views")),a.default.createElement("div",{style:{flex:1}},a.default.createElement(w.Provider,{value:{setCategory:e=>{if(e.transformableViewCategoryID)r({type:"categorySet",data:e});else{l.categories.filter((t=>t.transformableViewCategoryParentID==e.transformableViewCategoryParentID));var t=Math.max(...n.map((e=>e.transformableViewCategoryOrder??0)),0);e.transformableViewCategoryOrder=t+1}i(e)},setCategories:e=>{var t=e.map(((e,t)=>(e.transformableViewCategoryOrder=t,e)));r({type:"categoriesSet",data:e}),s(t)},deleteCategory:e=>{c(e)},setCurrentCategory:e=>{r({type:"categorySelect",data:e})},dialogOptions:l.dialogOptions,setDialog:e=>{r({type:"setDialog",data:e})},categories:l.categories,selectedCategory:l.selectedCategory}},a.default.createElement(t.Row,{ref:o},a.default.createElement(t.Column,{cols:t.Cols.Col3,className:"treeview-wrapper"},a.default.createElement(t.Paper,{fullHeight:!0},a.default.createElement("div",{style:{padding:20}},a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Headline,{size:t.HeadlineSize.S},"Categories")),a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Divider,{orientation:t.DividerOrientation.Horizontal})),a.default.createElement(I,null)))),a.default.createElement(t.Column,{cols:t.Cols.Col9,className:"views-wrapper"},a.default.createElement(t.Paper,{fullHeight:!0},a.default.createElement("div",{style:{padding:20}},a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Headline,{size:t.HeadlineSize.S},"Views")),a.default.createElement("div",{style:{paddingBottom:20}},a.default.createElement(t.Divider,{orientation:t.DividerOrientation.Horizontal})),l.selectedCategory&&l.selectedCategory.transformableViewCategoryID&&a.default.createElement(S,{categoryID:l.selectedCategory.transformableViewCategoryID}))))),l.selectedCategory&&a.default.createElement(h,null))))};var k=o(404),B={};B.styleTagTransform=y(),B.setAttributes=m(),B.insert=d().bind(null,"head"),B.domAPI=s(),B.insertStyleElement=f(),l()(k.Z,B),k.Z&&k.Z.locals&&k.Z.locals;const O=({value:n,onSelect:l,open:r,closeDialog:o,props:i})=>{const[s,c]=(0,a.useState)(n),[d,u]=(0,a.useState)(),[m,p]=(0,a.useState)([]),{executeCommand:f}=(0,e.useFormComponentCommandProvider)();(0,a.useEffect)((()=>{f&&f(i,"GetObjectTypes").then((e=>{e&&p(e)}))}),[f]);const g=(0,a.useMemo)((()=>d&&0!=d.length?m.filter((e=>e.text.toLowerCase().indexOf(d.toLowerCase())>-1)):m),[d,m]);return a.default.createElement(t.Dialog,{isOpen:r,headline:"Select Types",overlayClassName:"dialog-z-index",onOverlayClick:e=>e.preventDefault(),onClose:o,isDismissable:!0,headerCloseButton:{tooltipText:"Close Dialog"},confirmAction:{label:"Okay",onClick:()=>{l(s),o()}},cancelAction:{label:"Cancel",onClick:o}},a.default.createElement("div",{style:{paddingBottom:0}},a.default.createElement(t.Input,{placeholder:"(Filter)",value:d,onChange:e=>u(e.currentTarget.value)})),a.default.createElement("div",null,g.map((e=>a.default.createElement("div",{key:e.value,onClick:()=>c(e.value),className:"trbv-select-list-item"+(e.value==s?" selected":"")},a.default.createElement("span",null,a.default.createElement(t.Icon,{name:"xp-chevron-right-circle"})),a.default.createElement("span",null,e.text),a.default.createElement("span",{className:"selected-icon"},a.default.createElement(t.Icon,{name:"xp-check-circle"})))))))},P=({value:n,onSelect:l,open:r,closeDialog:o,props:i})=>{const[s,c]=(0,a.useState)(n),[d,u]=(0,a.useState)(),[m,p]=(0,a.useState)([]),{executeCommand:f}=(0,e.useFormComponentCommandProvider)();(0,a.useEffect)((()=>{f&&f(i,"GetViews").then((e=>{e&&p(e)}))}),[f]);const g=(0,a.useMemo)((()=>d&&0!=d.length?m.filter((e=>e.text.toLowerCase().indexOf(d.toLowerCase())>-1)):m),[d,m]);return a.default.createElement(t.Dialog,{isOpen:r,headline:"Select Views",overlayClassName:"dialog-z-index",onOverlayClick:e=>(e.preventDefault(),!1),onClose:o,isDismissable:!0,headerCloseButton:{tooltipText:"Close Dialog"},confirmAction:{label:"Okay",onClick:()=>{l(s),o()}},cancelAction:{label:"Cancel",onClick:o}},a.default.createElement("div",{style:{paddingBottom:0}},a.default.createElement(t.Input,{placeholder:"(Filter)",value:d,onChange:e=>u(e.currentTarget.value)})),a.default.createElement("div",null,g.map((e=>a.default.createElement("div",{key:e.value,onClick:()=>c(e.value),className:"trbv-select-list-item"+(e.value==s?" selected":"")},a.default.createElement("span",null,a.default.createElement(t.Icon,{name:"xp-chevron-right-circle"})),a.default.createElement("span",null,e.text),a.default.createElement("span",{className:"selected-icon"},a.default.createElement(t.Icon,{name:"xp-check-circle"})))))))},A=n=>{const[l,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),d=(0,a.useMemo)((()=>n.value),[n.value]),u=e=>{n.onChange&&n.onChange(e)},{executeCommand:m}=(0,e.useFormComponentCommandProvider)();return(0,a.useEffect)((()=>{m&&m(n,"GetViews").then((e=>{e&&r(e)}))}),[m]),a.default.createElement(t.FormItemWrapper,{label:n.label,explanationText:n.explanationText,invalid:n.invalid,validationMessage:n.validationMessage,markAsRequired:n.required,labelIcon:n.tooltip?"xp-i-circle":void 0,labelIconTooltip:n.tooltip,childrenWrapperClassnames:"transformable-view-component"},a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement("div",{style:{paddingBottom:10}},a.default.createElement(t.Input,{label:"Class Name",value:d.className,onChange:e=>u({...d,className:e.currentTarget.value})})),a.default.createElement(t.Button,{label:"Select Class Name",color:t.ButtonColor.Primary,onClick:()=>i(!0)})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"Columns",value:d.columns,onChange:e=>u({...d,columns:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"Where Condition",value:d.whereCondition,onChange:e=>u({...d,whereCondition:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"Order By",value:d.orderBy,onChange:e=>u({...d,orderBy:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{type:"number",label:"Top Number",value:d.topN,onChange:e=>u({...d,topN:e.currentTarget.valueAsNumber})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement("div",{style:{paddingBottom:10}},a.default.createElement(t.Input,{label:"View",value:d.view,onChange:e=>u({...d,view:e.currentTarget.value})})),a.default.createElement(t.Button,{label:"Select View",color:t.ButtonColor.Primary,onClick:()=>c(!0)})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"View Title",value:d.viewTitle,onChange:e=>u({...d,viewTitle:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"View Class Names",value:d.viewClassNames,onChange:e=>u({...d,viewClassNames:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:0}},a.default.createElement(t.TextArea,{label:"View Custom Content",value:d.viewCustomContent,onChange:e=>u({...d,viewCustomContent:e.currentTarget.value})})),a.default.createElement("div",{style:{zIndex:999999999}},a.default.createElement(t.WindowPortal,null,o&&a.default.createElement(O,{open:o,props:n,onSelect:e=>u({...d,className:e}),closeDialog:()=>i(!1),value:d.className}),s&&a.default.createElement(P,{open:s,props:n,onSelect:e=>u({...d,view:e}),closeDialog:()=>c(!1),value:d.view}))))};var M=o(577),R={};R.styleTagTransform=y(),R.setAttributes=m(),R.insert=d().bind(null,"head"),R.domAPI=s(),R.insertStyleElement=f(),l()(M.Z,R),M.Z&&M.Z.locals&&M.Z.locals;const H=({setInputType:e,open:n,closeDialog:l})=>{const[r,o]=(0,a.useState)("text"),[i,s]=(0,a.useState)(""),c=()=>{l()};return a.default.createElement(t.Dialog,{isOpen:n,headline:"Select Type",overlayClassName:"dialog-z-index",onClose:c,isDismissable:!0,headerCloseButton:{tooltipText:"Close Dialog"},confirmAction:{label:"Okay",onClick:()=>{e(r,i),l()}},cancelAction:{label:"Cancel",onClick:c}},a.default.createElement("div",{style:{paddingBottom:15},onClick:e=>e.stopPropagation(),onChange:e=>e.stopPropagation()},a.default.createElement(t.RadioGroup,{name:"Type",label:"Type",value:r,onChange:e=>o(e??"text")},a.default.createElement(t.RadioButton,{value:"text"}," Text "),a.default.createElement(t.RadioButton,{value:"number"}," Number "),a.default.createElement(t.RadioButton,{value:"email"}," Email "))),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"Name",value:i,onChange:e=>s(e.currentTarget.value)})))},L=e=>{const[n,l]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),i=(0,a.useMemo)((()=>e.value),[e.value]),s=(t,a,n)=>{const l={...i},r=l.inputs&&l.inputs.length>0?[...l.inputs]:[];if(r.find((e=>e.name==a)))for(let e=0;e<r.length;e++){let l=r[e];l.name==a&&(l={...l},l.type=t,l.name=a,l.value=n,r[e]=l)}else r.push({type:t,name:a,value:n});l.inputs=r,e.onChange&&e.onChange(l)},c=t=>{e.onChange&&e.onChange(t)};return a.default.createElement(t.FormItemWrapper,{label:e.label,explanationText:e.explanationText,invalid:e.invalid,validationMessage:e.validationMessage,markAsRequired:e.required,labelIcon:e.tooltip?"xp-i-circle":void 0,labelIconTooltip:e.tooltip,childrenWrapperClassnames:"transformable-view-widget"},i.inputs&&i.inputs.map((e=>a.default.createElement("div",{key:e.name,style:{paddingBottom:10}},a.default.createElement(t.Input,{label:e.name,value:e.value,type:e.type,onChange:t=>s(e.type,e.name,t.currentTarget.value)})))),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Button,{label:"Add Input",color:t.ButtonColor.Primary,onClick:()=>l(!0)})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement("div",{style:{paddingBottom:10}},a.default.createElement(t.Input,{label:"View",value:i.view,onChange:e=>c({...i,view:e.currentTarget.value})})),a.default.createElement(t.Button,{label:"Select View",color:t.ButtonColor.Primary,onClick:()=>o(!0)})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"View Title",value:i.viewTitle,onChange:e=>c({...i,viewTitle:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:15}},a.default.createElement(t.Input,{label:"View Class Names",value:i.viewClassNames,onChange:e=>c({...i,viewClassNames:e.currentTarget.value})})),a.default.createElement("div",{style:{paddingBottom:0}},a.default.createElement(t.TextArea,{label:"View Custom Content",value:i.viewCustomContent,onChange:e=>c({...i,viewCustomContent:e.currentTarget.value})})),a.default.createElement("div",{style:{zIndex:999999999}},a.default.createElement(t.WindowPortal,null,n&&a.default.createElement(H,{open:n,setInputType:s,closeDialog:()=>l(!1)}),r&&a.default.createElement(P,{open:r,props:e,onSelect:e=>c({...i,view:e}),closeDialog:()=>o(!1),value:i.view}))))}})(),i})())}}}));